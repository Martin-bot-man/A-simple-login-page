(self.webpackChunk=self.webpackChunk||[]).push([[274],{29366:(e,t,i)=>{i.r(t),i.d(t,{G2FeatureImpl:()=>Ve});var n=i(27378),r=i(14601),a=i(77176),s=i(98403),l=i(23239),o=i(57050),d=i(55649),c=i(13718),h=i(19751),u=i(5114),p=i(62874),g=i(14505),m=i(89456),_=i(81964);class v{constructor(e){this._params=e,this._subs=new r.w,this._emphasizedParagraph=l.h.create(u.YP),this._paragraphById=l.h.create(new Map),this.paragraphs=this._params.highlightCollection.highlights.view((e=>e.map((e=>({id:e.meta.paragraphId,text:e.meta.paragraphText,textRange:e.meta.paragraphTextRange,highlightRects:e.rects}))))),this.emphasizedParagraph=this._emphasizedParagraph.view(),this._subs.add(this._params.mouseData.pipe(c.U(p.S.hz30),h.skipBy(g.Z.eq),a.U((({client:e,offset:t})=>e&&t&&(0,_._N)(e,this._params.textFieldElement)?(0,o.zG)(u.ij(this.paragraphs.get().find((e=>e.highlightRects.some((e=>m.UL.contains(t,e))))))):u.YP))).subscribe(s.wW(this._emphasizedParagraph))),this._subs.add(this.paragraphs.pipe(a.U((e=>e.reduce(((e,t)=>e.set(t.id,t)),new Map)))).subscribe(s.wW(this._paragraphById)))}getParagraphById(e){return u.ij(this._paragraphById.get().get(e))}dispose(){this._subs.unsubscribe()}}const f=n.lazy((()=>i.e(274).then(i.bind(i,60907)).then((({ParagraphHighlights:e})=>({default:e}))))),b=n.lazy((()=>i.e(274).then(i.bind(i,63408)).then((({Sidelines:e})=>({default:e})))));var S=i(66310),w=i(2844),y=i(48015),x=i(68435),I=i(52423);class R{constructor(e){this._params=e,this._subs=new r.w,this._logger=d.Y.create("G2SidelineCollectionImpl"),this._sidelines=l.h.create([]),this._sidelineById=l.h.create(new Map),this._emphasizedSideline=l.h.create(u.YP),this._activeSideline=l.h.create(u.YP),this._pinnedSideline=l.h.create(u.YP),this.sidelines=this._sidelines.view(),this.emphasizedSideline=this._emphasizedSideline.view(),this.activeSideline=this._activeSideline.view(),this.pinnedSideline=this._pinnedSideline.view(),this._subs.add(this._params.paragraphCollection.paragraphs.pipe(S.w((e=>w.aj([this._params.integration.textFieldDOMRectTopLeft,this._params.textFieldLayout.rect.behavior.pipe(a.U((e=>e.client))),this._params.textFieldLayout.scroll.behavior]).pipe(a.U((([t,i,n])=>e.map((e=>{const r=function(e,t,i,n){const r=`g2-sideline-${e.textRange.start}-${e.textRange.end}`,a=(0,x.jr)(e.highlightRects);if(null===a)return null;const s={kind:"offsetPoint",...a},l=(0,I.Z)(s,t,i);return{id:r,paragraphId:e.id,anchorRect:l,textFieldDOMRectTopLeft:n}}(e,i,n,t);return null===r?(this._logger.warn("Failed to create sideline for paragraph; skipping.",{paragraph:e}),null):r})).filter(y.Nf))))))).subscribe(s.wW(this._sidelines))),this._subs.add(this._sidelines.pipe(a.U((e=>e.reduce(((e,t)=>e.set(t.id,t)),new Map)))).subscribe(s.wW(this._sidelineById)))}_doesSidelineIdMatchRelevantSideline(e,t){return(0,o.zG)(t,u.g_((()=>!1),(t=>e===t.id)))}emphasizeSideline(e){this._logger.debug("Emphasizing sideline.",{sidelineId:e});const t=u.ij(this._sidelineById.get().get(e));u.pC(t)?this._emphasizedSideline.set(t):this._logger.warn("Tried to emphasized non-existing sideline, this is a no-op.")}unemphasizeSideline(e){this._logger.debug("Unemphasizing sideline.",{sidelineId:e}),this._doesSidelineIdMatchRelevantSideline(e,this._emphasizedSideline.get())?this._emphasizedSideline.set(u.YP):this._logger.warn("Tried to unemphasize sideline that is not emphasized, this is a no-op.",{sidelineId:e})}activateSideline(e){this._logger.debug("Activating sideline.",{sidelineId:e});const t=u.ij(this._sidelineById.get().get(e));u.pC(t)?(this._activeSideline.set(t),this.emphasizeSideline(e)):this._logger.warn("Tried to activate non-existing sideline, this is a no-op.",{sidelineId:e})}deactivateSideline(e){this._logger.debug("Deactivating sideline.",{sidelineId:e}),this._doesSidelineIdMatchRelevantSideline(e,this._activeSideline.get())?this._activeSideline.set(u.YP):this._logger.warn("Tried to deactivate sideline that is not active, this is a no-op.",{sidelineId:e})}pinSideline(e){this._logger.debug("Pinning sideline.",{sidelineId:e});const t=u.ij(this._sidelineById.get().get(e));u.pC(t)?(this._pinnedSideline.set(t),this.activateSideline(e)):this._logger.warn("Tried to pin non-existing sideline, this is a no-op.",{sidelineId:e})}unpinSideline(e){this._logger.debug("Unpinning sideline.",{sidelineId:e}),this._doesSidelineIdMatchRelevantSideline(e,this._pinnedSideline.get())?(this._pinnedSideline.set(u.YP),this.deactivateSideline(e)):this._logger.warn("Tried to unpin sideline that is not pinned, this is a no-op.",{sidelineId:e})}dispose(){this._subs.unsubscribe()}}var C=i(85985),k=i(78674),F=i(93508),z=i(54951),M=i(7604),U=i(68006),A=i(98017);function E(e){let t=0,i=0;const n=[];for(;i<e.length;)"\n"===e.charAt(i)&&(t!==i&&n.push({start:t,end:i}),t=i+1),i++;return t!==i&&n.push({start:t,end:i}),n}class T{constructor(e){this._params=e,this._subs=new r.w,this._logger=d.Y.create("G2ParagraphHighlightCollectionImpl"),this._highlightCollection=new z.C(this._params.geometryProvider,this._params.geometryLayout,(()=>this._params.textObserver.getCurrentTextMap()),(0,U.u)(),(0,M.WF)(this._params.textFieldLayout),(0,A.m)()),this.highlights=this._highlightCollection.geometry.view((e=>Array.from(e.values()))),this._subs.add(this._params.textObserver.contentChanges.async.pipe(C.h((e=>!e.deltaChange.isEmpty)),k.b(1e3),F.O(null),a.U((()=>{const e=this._params.textObserver.getCurrentTextMap().getPlainText();return{paragraphTextRanges:E(e),fullText:e}}))).subscribe((({paragraphTextRanges:e,fullText:t})=>{this._logger.debug("Updating paragraph highlight collection.",{paragraphTextRanges:e});const i=Array.from(this._highlightCollection.geometry.get().keys());this._highlightCollection.removeHighlights(i);for(const i of e){const e=`g2-paragraph-${i.start}-${i.end}`,n=M.y$.Id.create(e);this._highlightCollection.addHighlight(n,i,{highlightId:n,paragraphId:e,paragraphText:t.slice(i.start,i.end),paragraphTextRange:i,alertId:e,highlightColor:null,highlightDisplayFormat:null,highlightLiveliness:null})}})))}dispose(){this._subs.unsubscribe()}}var L=i(61292),P=i(46297);class G{constructor(e){this._params=e,this._logger=d.Y.create("G2IntegrationGoogleDocs"),this.name="g2-google-docs-integration",this.textFieldDOMRectTopLeft=this._params.textFieldLayout.rect.behavior.pipe(a.U((e=>{const t=this._params.textFieldElement.querySelector(P.gv);if(null!==t){const{top:e,left:i,width:n,height:r}=t.getBoundingClientRect();return{top:e,left:i,width:n,height:r}}return this._logger.warn("Failed to retrieve canvas content element, defaulting to text field layout rect, which may not be appropriate as a text field DOM rect for documents with pages."),{top:e.client.top,left:e.client.left,...e.size}})))}}class B{constructor(e){this._params=e,this.name="g2-base-integration",this.textFieldDOMRectTopLeft=this._params.textFieldLayout.rect.behavior.pipe(a.U((e=>({...e.client,...e.size}))))}}var D=i(20236),O=i(10389);var H=i(8125),j=i(22232),Y=i(95195);const $={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let V;const W=new Uint8Array(16);function N(){if(!V&&(V="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!V))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return V(W)}const q=[];for(let e=0;e<256;++e)q.push((e+256).toString(16).slice(1));function J(e,t=0){return q[e[t+0]]+q[e[t+1]]+q[e[t+2]]+q[e[t+3]]+"-"+q[e[t+4]]+q[e[t+5]]+"-"+q[e[t+6]]+q[e[t+7]]+"-"+q[e[t+8]]+q[e[t+9]]+"-"+q[e[t+10]]+q[e[t+11]]+q[e[t+12]]+q[e[t+13]]+q[e[t+14]]+q[e[t+15]]}const Q=function(e,t,i){if($.randomUUID&&!t&&!e)return $.randomUUID();const n=(e=e||{}).random||(e.rng||N)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=n[e];return t}return J(n)};var Z,K=i(60797),X=i(14717),ee=i(73915),te=i(59502),ie=i(59312);!function(e){e.Ideation="ideation",e.Rewrite="rewrite"}(Z||(Z={}));var ne,re,ae,se,le=i(83257),oe=i(18164),de=Ge((function(e){return Pe(ce(e),e.struct({}))(e)})),ce=Ge((function(e){return e.intersect(e.partial({debugInfoJson:e.string}))(e.struct({id:e.number,correlationId:e.string}))})),he=Ge((function(e){return Pe(ce(e),e.struct({}))(e)})),ue=(Ge((function(e){return Fe(e)})),Ge((function(e){var t;return e.sum("valueType")(((t={}).string=ge(e),t))}))),pe=Ge((function(e){return e.struct({header:e.string,text:e.readonly(e.array(e.string))})})),ge=Ge((function(e){return e.intersect(e.partial({hint:pe(e)}))(e.struct({valueType:e.literal("string"),label:e.string,name:e.string}))})),me=Ge((function(e){return e.struct({id:e.string,label:e.string,args:e.readonly(e.array(ue(e)))})})),_e=Ge((function(e){var t;return e.sum("kind")(((t={}).id=ve(e),t.label=fe(e),t))})),ve=Ge((function(e){return e.struct({kind:e.literal("id"),value:e.string})})),fe=Ge((function(e){return e.struct({kind:e.literal("label"),value:e.string})})),be=Ge((function(e){return e.struct({name:e.string,value:e.string})})),Se=Ge((function(e){var t;return e.sum("kind")(((t={}).predefinedAction=we(e),t.userPrompt=ye(e),t))})),we=Ge((function(e){return e.intersect(e.partial({args:e.readonly(e.array(be(e)))}))(e.struct({kind:e.literal("predefinedAction"),actionIdentifier:_e(e)}))})),ye=Ge((function(e){return e.struct({kind:e.literal("userPrompt"),value:e.string})})),xe=(ne=Z,re=Object.keys(ne).map((function(e){return ne[e]})),ae=re[0],se=re.slice(1),Ge((function(e){return e.literal.apply(e,(0,ie.ev)([ae],se,!1))}))),Ie=Ge((function(e){return e.intersect(e.partial({trustResult:e.boolean}))(e.struct({}))})),Re=Ge((function(e){return e.intersect(e.partial({onApplyAcceptAlerts:e.readonly(e.array(e.number))}))(e.intersect(e.partial({onApplyIgnoreAlerts:e.readonly(e.array(e.number))}))(e.struct({})))})),Ce=Ge((function(e){return e.struct({start:e.number,end:e.number})})),ke=Ge((function(e){return e.struct({promptsRemaining:e.number,promptsAllocated:e.number,refillDate:e.string})})),Fe=Ge((function(e){var t;return e.sum("action")(((t={})["disposable_cheetah:getActions"]=ze(e),t["disposable_cheetah:invokeCommand"]=Me(e),t["disposable_cheetah:availableActions"]=Ue(e),t["disposable_cheetah:resultSuccess"]=Ae(e),t["disposable_cheetah:partialResult"]=Ee(e),t["disposable_cheetah:resultFailure"]=Te(e),t))})),ze=Ge((function(e){return Pe(de(e),ce(e),e.intersect(e.partial({textScope:Ce(e)}))(e.struct({action:e.literal("disposable_cheetah:getActions"),rev:e.number,generationMode:xe(e)})))(e)})),Me=Ge((function(e){return Pe(de(e),ce(e),e.intersect(e.partial({textScope:Ce(e)}))(e.intersect(e.partial({meta:Ie(e)}))(e.struct({action:e.literal("disposable_cheetah:invokeCommand"),rev:e.number,generationMode:xe(e),command:Se(e)}))))(e)})),Ue=Ge((function(e){return Pe(ce(e),he(e),e.struct({action:e.literal("disposable_cheetah:availableActions"),actions:e.readonly(e.array(me(e)))}))(e)})),Ae=Ge((function(e){return Pe(ce(e),he(e),e.struct({action:e.literal("disposable_cheetah:resultSuccess"),rewrittenText:e.string,rewrittenTextDelta:e.sensitiveDelta,usageLimits:ke(e),meta:Re(e)}))(e)})),Ee=Ge((function(e){return Pe(ce(e),he(e),e.struct({action:e.literal("disposable_cheetah:partialResult"),rewrittenText:e.string}))(e)})),Te=Ge((function(e){return Pe(ce(e),he(e),e.struct({action:e.literal("disposable_cheetah:resultFailure"),error:e.string}))(e)})),Le=(Ge((function(e){var t;return e.sum("action")(((t={})["disposable_cheetah:getActions"]=ze(e),t["disposable_cheetah:invokeCommand"]=Me(e),t))})),Ge((function(e){var t;return e.sum("action")(((t={})["disposable_cheetah:getActions"]=ze(e),t["disposable_cheetah:invokeCommand"]=Me(e),t["disposable_cheetah:availableActions"]=Ue(e),t["disposable_cheetah:resultSuccess"]=Ae(e),t["disposable_cheetah:partialResult"]=Ee(e),t["disposable_cheetah:resultFailure"]=Te(e),t))})),Ge((function(e){var t;return e.sum("action")(((t={})["disposable_cheetah:availableActions"]=Ue(e),t["disposable_cheetah:resultSuccess"]=Ae(e),t["disposable_cheetah:partialResult"]=Ee(e),t["disposable_cheetah:resultFailure"]=Te(e),t))})));function Pe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ge((function(t){return e.reduce((function(e,i){return t.intersect(i)(e)}))}))}function Ge(e){return oe.H(e)}(0,o.MZ)(ee.n);le.ov,le.id(),le.id(),le.id(),le.AG,le.dt,le.n_,le.r$,le.IM,le.IX,le.bc,le.wf,le.Sm,le.OT;const Be=ee.n((De=te.Schemable,function(e){return(0,ie.pi)((0,ie.pi)({},De),e)})({sensitiveDelta:te.id()}))(Le).is;var De;function Oe(e){return Be(e)&&"disposable_cheetah:resultSuccess"===e.action}function He(e){return Be(e)&&"disposable_cheetah:resultFailure"===e.action}function je(e){return{kind:"predefinedAction",actionIdentifier:{kind:"id",value:e}}}function Ye(e){switch(e){case"improve":return je("VBarG2DefaultRewrite");case"calliope":return je("VBarG2Calliope");case"rephrase":return je("VBarG2Paraphrase");case"shorten":return je("VBarG2Shorter");case"friendly":return je("VBarG2Friendly");case"formal":return je("VBarG2Formal");default:(0,j.L0)(e)}}class $e{constructor(e){this._params=e,this._subs=new r.w,this._logger=d.Y.create("G2RewriteServiceImpl"),this._relevantCapiMessages=this._params.checkingService.pipe(K.oA,S.w((e=>e.capiMessages)),C.h((0,H.Kg)(Oe,He))),this._cachedRewriteIdMap=new Map,this._cachedRewriteMap=new Map,this._subs.add(this._relevantCapiMessages.subscribe((e=>this._handleServerMessage(e))))}_handleServerMessage(e){Oe(e)?this._handleServerMessageResultSuccess(e):He(e)?this._handleServerMessageResultFailure(e):(0,j.L0)(e)}_handleServerMessageResultSuccess(e){const t=this._cachedRewriteMap.get(e.correlationId);if(void 0===t)this._logger.warn("Received a successful result with unknown correlation ID.",{resultSuccessMessage:e});else{const i={kind:"ready",id:t.get().id,type:t.get().type,text:t.get().text,textRange:t.get().textRange,rewriteText:e.rewrittenText,rewriteDelta:e.rewrittenTextDelta};this._logger.debug("Received a successful result; updating rewrite.",{rewriteBefore:t.get(),rewriteAfter:i}),t.set(i)}}_handleServerMessageResultFailure(e){const t=this._cachedRewriteMap.get(e.correlationId);if(void 0===t)this._logger.warn("Received a failed result with unknown correlation ID.",{resultFailureMessage:e});else{const i={kind:"error",id:t.get().id,type:t.get().type,text:t.get().text,textRange:t.get().textRange,errorReason:e.error};this._logger.debug("Received a failed result; updating rewrite.",{rewriteBefore:t.get(),rewriteAfter:i}),t.set(i)}}async getRewrite(e,t,i,n=!0){const r=(0,X.Wu)(t),a=`${e}-${i.start}-${i.end}-${r}`,s=this._cachedRewriteIdMap.get(a),o=void 0!==s?this._cachedRewriteMap.get(s):void 0;if(n&&void 0!==o)return o;n||void 0===s||void 0===o||this._cachedRewriteMap.delete(s);const d=this._params.checkingService.get();if(u.Wi(d)){const e="Failed to get rewrite. Checking service not initialized yet.";throw this._logger.error(e),e}const c=Q();this._cachedRewriteIdMap.set(a,c);const h=l.h.create({kind:"loading",id:c,type:e,text:t,textRange:i});this._cachedRewriteMap.set(h.get().id,h);const p=function(e){return{command:Ye(e.type),correlationId:e.id,generationMode:Z.Rewrite,textScope:{start:e.textRange.start,end:e.textRange.end},debugInfoJson:JSON.stringify({trackBackendTimings:!0}),meta:{trustResult:!0}}}(h.get());try{const e=await d.value.sendMessage("disposable_cheetah:invokeCommand",p,!0,!1)();if(Y.isLeft(e))throw e.left.message;return h}catch(e){const t=`Failed to get rewrite; encountered error sending disposable_cheetah:invokeCommand message to CAPI: ${e}.`;throw this._logger.error(t,{error:e}),t}}dispose(){this._subs.unsubscribe()}}class Ve{constructor(e){this._params=e,this._subs=new r.w,this._logger=d.Y.create("G2FeatureImpl"),this._alertFilter=l.h.create(o.W8),this._integration=(0,L.a9)(this._params.integrationName)?new G({textFieldLayout:this._params.textFieldLayout,textFieldElement:this._params.textFieldElement}):new B({textFieldLayout:this._params.textFieldLayout}),this._paragraphHighlightCollection=new T({textObserver:this._params.textObserver,geometryProvider:this._params.geometryProvider,geometryLayout:this._params.geometryLayout,textFieldLayout:this._params.textFieldLayout}),this._paragraphCollection=new v({highlightCollection:this._paragraphHighlightCollection,textFieldElement:this._params.textFieldElement,mouseData:this._params.mouseData}),this._sidelineCollection=new R({paragraphCollection:this._paragraphCollection,integration:this._integration,textFieldLayout:this._params.textFieldLayout}),this._rewriteService=new $e({checkingService:this._params.checkingService}),this.alertFilter=this._alertFilter.view(),this._logger.debug("G2 initialized on:",this._params.integrationName),this._subs.add(this._params.alertClassification.visibleInlineAlertsFilter.pipe(a.U((e=>t=>{return e(t)&&(i=t,D.S.isTransformJsonCapiAlert(i)&&i.outcome===O.TC.correctness&&i.transformJSON.highlights.every((e=>"enclosing"!==e.type)));var i}))).subscribe(s.wW(this._alertFilter)))}get paragraphHighlightsUI(){return n.createElement(n.Suspense,{fallback:n.createElement(n.Fragment,null)},n.createElement(f,{paragraphs:this._paragraphCollection.paragraphs,activeSideline:this._sidelineCollection.activeSideline,pinnedSideline:this._sidelineCollection.pinnedSideline}))}get sidelinesUI(){return n.createElement(n.Suspense,{fallback:n.createElement(n.Fragment,null)},n.createElement(b,{sidelines:this._sidelineCollection.sidelines,emphasizedParagraph:this._paragraphCollection.emphasizedParagraph,emphasizedSideline:this._sidelineCollection.emphasizedSideline,activeSideline:this._sidelineCollection.activeSideline,pinnedSideline:this._sidelineCollection.pinnedSideline,onEmphasizeSideline:e=>this._sidelineCollection.emphasizeSideline(e),onUnemphasizeSideline:e=>this._sidelineCollection.unemphasizeSideline(e),onActivateSideline:e=>this._sidelineCollection.activateSideline(e),onDeactivateSideline:e=>this._sidelineCollection.deactivateSideline(e),onPinSideline:e=>this._sidelineCollection.pinSideline(e),onUnpinSideline:e=>this._sidelineCollection.unpinSideline(e)}))}dispose(){this._subs.unsubscribe(),this._paragraphHighlightCollection.dispose(),this._paragraphCollection.dispose(),this._sidelineCollection.dispose(),this._rewriteService.dispose()}}},60907:(e,t,i)=>{i.r(t),i.d(t,{ParagraphHighlights:()=>h});var n=i(5114),r=i(8543),a=i(23239),s=i(54001),l=i(57050),o=i(27378),d=i(41572),c=i(71469);const h=({paragraphs:e,activeSideline:t,pinnedSideline:i})=>o.createElement(r.F.Fragment,null,a.h.combine(e,t,i,((e,t,i)=>o.createElement(d.L,{key:"g2",chunkName:"g2"},e.map((e=>e.highlightRects.map(((r,a)=>{return o.createElement("div",{key:`${e.id}-${a}`,...(0,s.Sh)(c.paragraphHighlightRect,(d=e.id,h=(0,l.zG)(i,n.UI((e=>e.paragraphId))),u=(0,l.zG)(t,n.UI((e=>e.paragraphId))),(0,l.zG)(h,n.UI((e=>e===d)),n.wp((()=>(0,l.zG)(u,n.UI((e=>e===d))))),n.fS((()=>!1)))?c.paragraphHighlightRectActive:void 0)),style:{top:r.top,left:r.left,width:r.width,height:r.height}});var d,h,u}))))))))},63408:(e,t,i)=>{i.r(t),i.d(t,{Sidelines:()=>v});var n=i(5114),r=i(8543),a=i(23239),s=i(57050),l=i(27378),o=i(41572),d=i(54001),c=i(47385),h=i(46354),u=i(80463),p=i(22232);const g=({emphasized:e,signalColor:t,fillColor:i,height:n,onClick:r,onMouseOver:a,onMouseOut:s,onFocus:o,onBlur:g})=>l.createElement("button",{"data-testid":"grammarly-g2-sideline",...(0,d.Sh)(c.sideline,e?c.sidelineEmphasized:c.sidelineIdle,"blue"===i?c.sidelineFillBlue:void 0),style:{height:n},disabled:!e,onClick:e?r:void 0,onFocus:e?o:void 0,onBlur:e?g:void 0,onMouseOver:a,onMouseOut:s,"aria-label":"See rewrite suggestions"},"none"!==t&&l.createElement("div",{...(0,d.Sh)(c.sidelineSignal,(e=>{if("none"!==e)return"red"===e?c.sidelineSignalRed:"purple"===e?c.sidelineSignalPurple:void(0,p.L0)(e)})(t)),role:"status","aria-label":"Rewrite suggestions available"}),l.createElement(h.J,{...(0,d.Sh)(c.sidelineArrow,e?c.sidelineArrowEmphasized:c.sidelineArrowIdle),icon:u.b,accessibilityLabel:"",size:"small",variant:"none"!==i?"inverse":"default"}));var m=i(23437);function _(e,t,i,r,a){return(0,s.zG)(t,n.UI((t=>t===e.id)),n.fS((()=>(0,s.zG)(i,n.UI((t=>t===e.id)),n.fS((()=>!1)))||(0,s.zG)(r,n.UI((t=>t===e.id)),n.fS((()=>!1)))||(0,s.zG)(a,n.UI((t=>t===e.paragraphId)),n.fS((()=>!1))))))}const v=({sidelines:e,emphasizedParagraph:t,emphasizedSideline:i,activeSideline:d,pinnedSideline:c,onEmphasizeSideline:h,onUnemphasizeSideline:u,onActivateSideline:p,onDeactivateSideline:v,onPinSideline:f,onUnpinSideline:b})=>l.createElement(r.F.Fragment,null,a.h.combine(e,t,i,d,c,((e,t,i,a,d)=>l.createElement(o.L,{key:"g2",chunkName:"g2"},e.map((e=>l.createElement(r.F.span,{key:e.id,className:m.sidelinePositioner,style:{top:e.anchorRect.top,left:e.textFieldDOMRectTopLeft.left,width:e.anchorRect.left-e.textFieldDOMRectTopLeft.left},onMouseEnter:()=>h(e.id),onMouseLeave:()=>u(e.id)},l.createElement(g,{fillColor:"none",emphasized:_(e,(0,s.zG)(d,n.UI((e=>e.id))),(0,s.zG)(a,n.UI((e=>e.id))),(0,s.zG)(i,n.UI((e=>e.id))),(0,s.zG)(t,n.UI((e=>e.id)))),signalColor:"none",height:e.anchorRect.height,onClick:()=>f(e.id),onFocus:()=>f(e.id),onBlur:()=>b(e.id),onMouseOver:()=>p(e.id),onMouseOut:()=>v(e.id)}))))))))},46297:(e,t,i)=>{i.d(t,{$x:()=>s,F8:()=>g,Go:()=>r,Kt:()=>w,Lq:()=>d,Q2:()=>b,QR:()=>k,Qy:()=>v,Vk:()=>y,Wp:()=>n,XG:()=>a,_m:()=>u,d0:()=>c,f:()=>o,gH:()=>_,gL:()=>x,gv:()=>m,ij:()=>C,j5:()=>S,jW:()=>p,lO:()=>R,os:()=>f,rx:()=>I,uj:()=>h,y1:()=>l});const n=".kix-appview-editor",r=".docos-input",a=".docs-texteventtarget-iframe",s=".kix-cursor",l=".kix-cursor-caret",o="#docs-revisions-sidebar",d='#docs-toolbar-mode-switcher[aria-label="Viewing mode"]',c="#docs-toolbar-mode-switcher",h="edit-mode",u="suggest-mode",p="#titlebar-mode-indicator-container .titlebar-request-access-button",g="#titlebar-mode-indicator-container .kix-titlebar-request-access-button",m=".kix-canvas-tile-content",_="canvas.kix-canvas-tile-content:not(.docs-ui-unprintable *)",v=".kix-rotatingtilemanager:not(.docs-ui-unprintable *)",f=".kix-page-paginated.canvas-first-page",b="kix-page-canvas-compact-mode",S=".docs-horizontal-ruler",w=".docs-vertical-ruler",y="#fontSizeSelect input",x=".docs-ruler-background",I=".docs-ruler-background-inner",R=".docs-ruler-indent-first-line",C=".modal-dialog.docs-dialog .fatal-error-message",k='#docs-titlebar-share-client-button div[role="button"]'},14717:(e,t,i)=>{function n(e,t=0){return(t<<5)-t+(0|e)|0}function r(e,t=0){let i=t;for(const t of e)i=n(t.charCodeAt(0),i);return i}i.d(t,{Wu:()=>r,k3:()=>n})},83257:(e,t,i)=>{i.d(t,{AG:()=>a,IM:()=>d,IX:()=>c,OT:()=>m,Sm:()=>p,Vo:()=>g,bc:()=>h,dt:()=>l,id:()=>v,n_:()=>s,ov:()=>f,qm:()=>b,r$:()=>o,wf:()=>u});var n=i(18164),r=i(57050);function a(e){return{encode:function(t){return null===t?null:e.encode(t)}}}function s(e){return{encode:function(t){var i={};for(var n in e)i[n]=e[n].encode(t[n]);return i}}}var l=s;function o(e){return{encode:function(t){var i={};for(var n in e){var r=t[n];n in t&&(i[n]=void 0===r?void 0:e[n].encode(r))}return i}}}function d(e){return{encode:function(t){var i={};for(var n in t)i[n]=e.encode(t[n]);return i}}}function c(e){return{encode:function(t){return t.map(e.encode)}}}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{encode:function(t){return e.map((function(e,i){return e.encode(t[i])}))}}}var u=function(e){return function(t){return{encode:function(i){return(0,n.U)(t.encode(i),e.encode(i))}}}};function p(e){return function(t){return{encode:function(i){return t[i[e]].encode(i)}}}}function g(e){var t=(0,n.H)(e);return{encode:function(e){return t().encode(e)}}}var m=r.yR,_=function(e,t){return{encode:function(i){return e.encode(t(i))}}};function v(){return{encode:r.yR}}var f="io-ts/Encoder",b={URI:f,contramap:_}},47385:e=>{e.exports={sideline:"BhSZx",sidelineEmphasized:"n6ulf",sidelineFillBlue:"u56Pu",sidelineSignal:"KRUES",sidelineSignalRed:"O8Ye8",sidelineSignalPurple:"AnBeu",sidelineArrow:"YMmvo",sidelineArrowIdle:"B64tj",sidelineArrowEmphasized:"eQq2t"}},71469:e=>{e.exports={paragraphHighlightRect:"RJsDT",paragraphHighlightRectActive:"hjqdh"}},23437:e=>{e.exports={sidelinePositioner:"L7jHH"}},80463:(e,t,i)=>{i.d(t,{b:()=>r});var n=i(27378);const r=(0,i(91961).I)("color",(({title:e,titleId:t,desc:i,descId:r,...a})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...a},i?n.createElement("desc",{id:r},i):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m2 5 6 6 6-6"}))))}}]);